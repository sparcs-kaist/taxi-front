import{j as d,b as e,T as F,t as i,W as T,B as R,L as H,A as S,v as W,u as Y,r as s,n as k,s as B,aY as Q,c as V,w as z,h as G,i as X,z as $,aj as q,aP as J,F as K,aV as U}from"./index-ffb5f151.js";import{u as Z,O as ee,a as te,d as ae,b as se,c as oe}from"./Time-d15be611.js";import{W as ne}from"./WhiteContainerSuggestLogin-8b80a525.js";import{M as le}from"./index-a44dad43.js";import"./MiniCircle-09da5886.js";import"./LinkLogin-660f18f8.js";const re=()=>d(S,{type:"center",children:[e(F,{icon:"add",isHeader:!0,children:"방 개설하기"}),e(T,{css:{padding:"12px 16px"},children:d("div",{style:i.font16,children:["참여할 수 있는 방 개수는"," ",e("b",{style:{color:i.purple},children:"최대 5개"}),"입니다."]})}),e(T,{css:{padding:"12px 16px"},children:d("div",{style:{...i.font16,lineHeight:"24px"},children:["이미 5개의 방에 참여 중이며 ",e("b",{children:"방 개설이 제한"}),"됩니다. 추가적으로 방 개설을 원하는 경우 참여 중인 방에서 ",e("b",{children:"정산을 완료"}),"하거나"," ",e("b",{children:"탑승을 취소"}),"해야 합니다."]})}),e(H,{to:"/myroom",style:{textDecoration:"none"},children:e(R,{type:"purple",css:{padding:"13px 24px 14px",borderRadius:"12px",...i.font14_bold},children:"참여 중인 방 보기"})})]}),he=()=>{var y,v;const b=W(),C=Y(),[n,A]=Z(["defaultFromTo"]),m=s.useRef(!1),c=k(),h=B(),[u,M]=s.useState(""),[a,P]=s.useState((y=n==null?void 0:n.defaultFromTo)!=null&&y[0]&&((v=n==null?void 0:n.defaultFromTo)!=null&&v[1])?n.defaultFromTo:[null,null]),[t,D]=s.useState([c.year(),c.month()+1,c.date()]),[f,O]=s.useState(4),[l,N]=s.useState([h.hour(),h.minute()]),[x,E]=s.useState(null),g=s.useMemo(Q,[]),L=V(z),w=G(),p=X("myRooms"),I=$("myRooms"),_=q();s.useEffect(()=>{const r=new Date;r.setFullYear(r.getFullYear()+10),a[0]&&a[1]&&A("defaultFromTo",a,{expires:r})},[a]),s.useEffect(()=>{E(new Date(t[0],t[1]-1,t[2],l[0],l[1]))},[t,l]);let o=null;a.every(r=>!!r)?a[0]===a[1]?o="출발지와 도착지는 달라야 합니다":!t[0]||!t[1]||!t[2]?o="날짜를 선택해 주세요":c.isSameOrAfter(x)?o="현재 시각 이후를 선택해주세요":u!==""&&!J.roomName(u)&&(o="사용할 수 없는 방 이름입니다"):o="출발지와 도착지를 선택해 주세요";const j=async()=>{m.current||(m.current=!0,await b({url:"/rooms/create",method:"post",data:{name:u||g,from:a[0],to:a[1],time:x.toISOString(),maxPartLength:f},onSuccess:()=>{I(),_("firstRoomCreation"),C.push("/myroom")},onError:()=>L("방 개설에 실패하였습니다.")}),m.current=!1)};return((p==null?void 0:p.ongoing.length)??0)<le?e("div",{children:d(S,{type:"center",children:[e(F,{icon:"add",isHeader:!0,children:"방 개설하기"}),w?d(K,{children:[e(ee,{value:a,handler:P}),e(te,{value:t,handler:D}),e(ae,{value:u,handler:M,placeholder:g}),e(se,{value:l,handler:N,page:"add"}),e(oe,{value:f,handler:O}),e(R,{type:"purple",disabled:!!o,css:{padding:"14px 0 13px",borderRadius:"12px",...i.font16_bold},onClick:j,className:"scroll-to-button",children:o||`${U(new Date(t[0],t[1]-1,t[2],l[0],l[1]),"MMM Do [(]dd[)] a h[시] m[분]")} 방 개설하기`})]}):e(ne,{})]})}):e(re,{})};export{he as default};
