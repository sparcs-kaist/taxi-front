import{aR as R,v as U,r as s,i as P,z as Q,aj as ge,c as me,w as ye,aP as G,j as o,b as e,J as T,b2 as _e,b3 as xe,t as r,B as V,M as J,Q as K,b4 as Ce,b5 as be,E as Re,aV as ke,d as Oe,b6 as X,aX as Me,a_ as k,Y as b,a$ as O,X as Y,Z,q as Se,x as we,T as $e,F as Ie,W as E,b7 as Le,b8 as ze,g as Ee,b9 as Pe,A as Te,ba as Ae,bb as De}from"./index-ffb5f151.js";import{d as je,c as He,b as Ne,F as qe,M as Fe,a as We}from"./index-2ecb09e3.js";import{W as Ge}from"./WhiteContainerSuggestLogin-8b80a525.js";import"./LinkLogin-660f18f8.js";const Ve=i=>e("div",{css:{margin:"auto",width:"110px",height:"110px",borderRadius:"55%",overflow:"hidden"},children:e(K,{...i})}),Be=({onUpdate:i})=>{const{t:n}=R("mypage"),c=U(),d=s.useRef(null),[a,l]=s.useState(null),p=Q("loginInfo");s.useEffect(()=>{if(a==="LOADING")return;const h=setTimeout(()=>l(null),1500);return()=>clearTimeout(h)},[a]);const f=s.useCallback(async()=>{var h,C;l("LOADING");try{const g=await Ce((C=(h=d.current)==null?void 0:h.files)==null?void 0:C[0]);if(!g)return;const m=await c({url:"/users/editProfileImg/getPUrl",method:"post",data:{type:g.type}});if(m.url&&m.fields){const y=new FormData;for(const u in m.fields)y.append(u,m.fields[u]);if(y.append("file",g),(await be.post(m.url,y)).status===204){const u=await c({url:"/users/editProfileImg/done",method:"get"});if(u!=null&&u.result){p(),i==null||i(),l("SUCCESS");return}}}l("FAIL")}catch{l("FAIL")}},[i]),v=s.useCallback(()=>{var h;a||(h=d.current)==null||h.click()},[a]),t={textAlign:"center",...r.font10_bold,color:a==="SUCCESS"?r.green_button:a==="FAIL"?r.red_button:a==="LOADING"?r.gray_text:r.purple,width:"fit-content",margin:"16px auto",cursor:a?"default":"pointer"};return o("div",{css:t,onClick:v,children:[e("input",{type:"file",accept:"image/jpg, image/png, image/jpeg, image/heic",hidden:!0,onChange:f,ref:d}),n(a==="SUCCESS"?"page_modify.profile_image_success":a==="FAIL"?"page_modify.profile_image_failed":a==="LOADING"?"page_modify.profile_image_loading":"page_modify.profile_image_change")]})},Ue=({profToken:i,onUpdate:n,...c})=>{var $;const{t:d}=R("mypage"),a=U(),[l,p]=s.useState(""),[f,v]=s.useState(""),t=P("loginInfo"),h=Q("loginInfo"),C=ge(),g=me(ye);s.useEffect(()=>{c.isOpen&&(p((t==null?void 0:t.nickname)||""),v((t==null?void 0:t.account)||""))},[t,c.isOpen]);const m=G.account(f)&&G.nickname(l),y=async()=>{var I;let _=!1;m&&(l!==(t==null?void 0:t.nickname)&&(_=!0,await a({url:"/users/editNickname",method:"post",data:{nickname:l},onError:()=>g(d("page_modify.nickname_failed")),onSuccess:()=>C("nicknameChanging")})),f!==(t==null?void 0:t.account)&&(_=!0,await a({url:"/users/editAccount",method:"post",data:{account:f},onError:()=>g(d("page_modify.account_failed")),onSuccess:()=>C("accountChanging")})),_&&h(),(I=c.onChangeIsOpen)==null||I.call(c,!1))},M={...r.font20,textAlign:"center",marginBottom:"16px"},u={display:"flex",alignItems:"center",color:r.gray_text,whiteSpace:"nowrap",...r.font14},S={...r.font14,marginLeft:"12px"},w={display:"flex",justifyContent:"space-between",marginTop:"24px"};return o(J,{padding:"32px 10px 10px",onEnter:y,...c,children:[e("div",{css:M,children:t==null?void 0:t.name}),(t==null?void 0:t.profileImgUrl)&&e(Ve,{url:t==null?void 0:t.profileImgUrl,token:i}),e(Be,{onUpdate:n}),e(T,{direction:"row",margin:"0 2px"}),o("div",{css:{rowGap:"10px",padding:"0px 20px"},children:[o("div",{css:{...u,marginTop:"24px"},children:[d("student_id"),e("div",{css:S,children:($=t==null?void 0:t.subinfo)==null?void 0:$.kaist})]}),o("div",{css:{...u,marginTop:"16px"},children:[d("email"),e("div",{css:S,children:t==null?void 0:t.email})]}),o("div",{css:{...u,marginTop:"10px"},children:[d("nickname"),e(_e,{value:l,onChangeValue:p,css:{width:"100%",marginLeft:"10px"}})]}),o("div",{css:{...u,marginTop:"10px"},children:[d("account"),e(xe,{value:f,onChangeValue:v,css:{width:"100%",marginLeft:"10px"}})]})]}),o("div",{css:w,children:[e(V,{type:"gray",css:{width:"calc(50% - 5px)",padding:"10px 0 9px",borderRadius:"8px",...r.font14},onClick:()=>{var _;return(_=c.onChangeIsOpen)==null?void 0:_.call(c,!1)},children:d("page_modify.cancel")}),e(V,{type:"purple_inset",disabled:!m||l===(t==null?void 0:t.nickname)&&f===(t==null?void 0:t.account),css:{width:"calc(50% - 5px)",padding:"10px 0 9px",borderRadius:"8px",...r.font14_bold},onClick:y,children:d("page_modify.modify")})]})]})},B=i=>{var v;const{t:n}=R("mypage"),c={display:"flex",flexDirection:"column",overflow:"auto",borderRadius:"12px",minHeight:"240px",height:"calc(100vh - 480px)",rowGap:"8px"},d={display:"flex",flexDirection:"column",padding:"10px 12px",borderRadius:"12px",rowGap:"6px",boxShadow:r.shadow_gray_button_inset,backgroundColor:r.gray_background},a={display:"flex",flexWrap:"nowrap",columnGap:"8px"},l={...r.font12,color:r.gray_text,minWidth:"58px"},p={...r.font12},f=t=>n(t==="no-settlement"?"page_report.no_settlement":t==="no-show"?"page_report.no_show":"page_report.etc_reason");return(v=i.selectedReportHistory)!=null&&v.length?e("div",{css:c,children:i.selectedReportHistory.map(t=>o("div",{css:d,children:[o("div",{css:a,children:[e("div",{style:l,children:n("page_report.reason")}),e("div",{style:{...p,color:r.purple},children:f(t.type)})]}),e(T,{direction:"row",margin:"2px 0"}),i.option==="Reporting"&&o("div",{css:a,children:[e("div",{style:l,children:n("nickname")}),e("div",{style:p,children:t.reportedId.nickname})]}),o("div",{css:a,children:[e("div",{style:l,children:n("page_report.date")}),e("div",{style:p,children:ke(t.time)})]}),t.type==="etc-reason"&&o("div",{css:a,children:[e("div",{style:l,children:n("page_report.etc_reason")}),e("div",{style:p,children:t.etcDetail})]})]},t._id))}):e(Re,{type:"mobile",children:i.option==="Reporting"?n("page_report.empty_reported"):n("page_report.empty_received")})},Qe=i=>{const{t:n}=R("mypage"),[,c]=Oe.get("/reports/searchByUser"),d={...r.font18,display:"flex",alignItems:"center",marginBottom:"12px"},a={...r.font12,color:r.gray_text,wordBreak:"keep-all",padding:"0 8px 12px"},l={fontSize:"21px",margin:"0 4px 0 8px"},p=s.useMemo(()=>[{key:"Reporting",name:n("page_report.reported"),body:e(B,{option:"Reporting",selectedReportHistory:c==null?void 0:c.reporting})},{key:"Reported",name:n("page_report.received"),body:e(B,{option:"Reported",selectedReportHistory:c==null?void 0:c.reported})}],[c]);return o(J,{isOpen:i.isOpen,onChangeIsOpen:i.onChangeIsOpen,padding:"16px 12px",children:[o("div",{css:d,children:[e(X,{style:l}),n("report_record")]}),e("div",{css:a,children:n("page_report.inquiry")}),e(T,{}),e("div",{css:{height:"12px"}}),e(Me,{pages:p})]})};var A={},Je=b,Ke=O;Object.defineProperty(A,"__esModule",{value:!0});var ee=A.default=void 0,Xe=Ke(s),Ye=Je(k()),Ze=(0,Ye.default)(Xe.createElement("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"}),"AssignmentOutlined");ee=A.default=Ze;var D={},et=b,tt=O;Object.defineProperty(D,"__esModule",{value:!0});var te=D.default=void 0,at=tt(s),nt=et(k()),it=(0,nt.default)(at.createElement("path",{d:"M10.79 16.29c.39.39 1.02.39 1.41 0l3.59-3.59c.39-.39.39-1.02 0-1.41L12.2 7.7a.9959.9959 0 00-1.41 0c-.39.39-.39 1.02 0 1.41L12.67 11H4c-.55 0-1 .45-1 1s.45 1 1 1h8.67l-1.88 1.88c-.39.39-.38 1.03 0 1.41zM19 3H5c-1.11 0-2 .9-2 2v3c0 .55.45 1 1 1s1-.45 1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ExitToAppRounded");te=D.default=it;var j={},st=b,rt=O;Object.defineProperty(j,"__esModule",{value:!0});var ae=j.default=void 0,ct=rt(s),ot=st(k()),lt=(0,ot.default)(ct.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm1.61-9.96c-2.06-.3-3.88.97-4.43 2.79-.18.58.26 1.17.87 1.17h.2c.41 0 .74-.29.88-.67.32-.89 1.27-1.5 2.3-1.28.95.2 1.65 1.13 1.57 2.1-.1 1.34-1.62 1.63-2.45 2.88 0 .01-.01.01-.01.02-.01.02-.02.03-.03.05-.09.15-.18.32-.25.5-.01.03-.03.05-.04.08-.01.02-.01.04-.02.07-.12.34-.2.75-.2 1.25h2c0-.42.11-.77.28-1.07.02-.03.03-.06.05-.09.08-.14.18-.27.28-.39.01-.01.02-.03.03-.04.1-.12.21-.23.33-.34.96-.91 2.26-1.65 1.99-3.56-.24-1.74-1.61-3.21-3.35-3.47z"}),"HelpOutlineRounded");ae=j.default=lt;var H={},dt=b,pt=O;Object.defineProperty(H,"__esModule",{value:!0});var ne=H.default=void 0,ut=pt(s),ft=dt(k()),ht=(0,ft.default)(ut.createElement("path",{d:"M14.71 15.88L10.83 12l3.88-3.88c.39-.39.39-1.02 0-1.41a.9959.9959 0 00-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.39.39-1.03 0-1.42z"}),"KeyboardArrowLeftRounded");ne=H.default=ht;var N={},vt=b,gt=O;Object.defineProperty(N,"__esModule",{value:!0});var ie=N.default=void 0,mt=gt(s),yt=vt(k()),_t=(0,yt.default)(mt.createElement("path",{d:"M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25zm4.5 4c0-1.5-3-2.25-4.5-2.25s-4.5.75-4.5 2.25V17h9v-.75zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1z"}),"PortraitRounded");ie=N.default=_t;var q={},xt=b;Object.defineProperty(q,"__esModule",{value:!0});var se=q.default=void 0,Ct=xt(Y()),bt=Z,Rt=(0,Ct.default)((0,bt.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"LanguageRounded");se=q.default=Rt;var F={},kt=b;Object.defineProperty(F,"__esModule",{value:!0});var re=F.default=void 0,Ot=kt(Y()),Mt=Z,St=(0,Ot.default)((0,Mt.jsx)("path",{d:"m12 17.27 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z"}),"StarRounded");re=F.default=St;const wt=i=>{const n=s.useMemo(()=>({fontSize:"16px",marginRight:"8px"}),[]);switch(i){case"lang":return e(se,{style:n});case"report":return e(X,{style:n});case"ask":return e(ae,{style:n});case"policy":return e(ee,{style:n});case"credit":return e(ie,{style:n});case"notification-on":return e(He,{style:n});case"notification-off":return e(je,{style:n});case"logout":return e(te,{style:n});case"beta":return e(re,{style:n})}},x=({icon:i,onClick:n,children:c})=>{const[d,a]=Se(),l={display:"flex",alignItems:"flex-start",width:"fit-content",color:a?r.purple:void 0,...r.cursor()},p={...r.font14,color:"inherit"},f=s.useMemo(()=>({fontSize:"16px"}),[]);return o("div",{css:l,onClick:n,...d,children:[wt(i),e("div",{css:p,children:c}),a&&e(ne,{style:f})]})},Et=()=>{var W;const{t:i,i18n:n}=R("mypage"),[c,d]=we(),a=P("loginInfo"),l=P("notificationOptions"),{id:p}=a||{},[f,v]=s.useState(!1),[t,h]=s.useState(!1),[C,g]=s.useState(!1),[m,y]=s.useState(!1),[M,u]=s.useState(!1),[S,w]=s.useState(!1),[$,_]=s.useState(!1),I=s.useCallback(()=>v(!0),[]);s.useCallback(()=>n.changeLanguage(n.language==="ko"?"en":"ko"),[n.changeLanguage,n.language]);const ce=s.useCallback(()=>h(!0),[]),oe=s.useCallback(()=>g(!0),[]),le=s.useCallback(()=>y(!0),[]),de=s.useCallback(()=>u(!0),[]),pe=s.useCallback(()=>w(!0),[]),ue=s.useCallback(()=>_(!0),[]),fe={width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden",marginRight:"12px"},he={display:"flex",justifyContent:"space-between",marginTop:"15px"},ve={...r.font14,color:r.purple,cursor:"pointer"},L={display:"flex",...r.font14,color:r.gray_text,marginTop:"16px"},z={...r.font14,marginLeft:"12px"};return o(Te,{type:"center",children:[e($e,{icon:"mypage",isHeader:!0,children:i("my_page")}),p?o(Ie,{children:[o(E,{css:{padding:"16px 24px 24px"},children:[o("div",{css:{display:"flex",alignItems:"center"},children:[e("div",{css:fe,children:(a==null?void 0:a.profileImgUrl)&&e(K,{url:a.profileImgUrl,token:c})}),e("div",{css:r.font16_bold,className:"selectable",children:a==null?void 0:a.name})]}),o("div",{css:he,children:[e("div",{css:r.font14_bold,children:i("my_information")}),e("div",{css:ve,onClick:I,children:i("revise")})]}),o("div",{css:L,className:"selectable",children:[i("student_id"),e("div",{css:z,children:(W=a==null?void 0:a.subinfo)==null?void 0:W.kaist})]}),o("div",{css:L,className:"selectable",children:[i("email"),e("div",{css:z,children:a==null?void 0:a.email})]}),o("div",{css:L,className:"selectable",children:[i("nickname"),e("div",{css:z,children:a==null?void 0:a.nickname})]}),o("div",{css:L,className:"selectable",children:[i("account"),e("div",{css:z,children:a==null?void 0:a.account})]})]}),e(E,{children:o("div",{css:{display:"grid",rowGap:"16px"},children:[Le,e(x,{icon:`notification-${ze(l)?"on":"off"}`,onClick:ce,children:i("notification")})]})}),e(Ue,{isOpen:f,onChangeIsOpen:v,onUpdate:d,profToken:c}),e(Qe,{isOpen:C,onChangeIsOpen:g}),e(Ne,{isOpen:t,onChangeIsOpen:h})]}):e(Ge,{}),e(E,{children:o("div",{css:{display:"grid",rowGap:"16px"},children:[p&&e(x,{icon:"report",onClick:oe,children:i("report_record")}),e("a",{className:"popup-channeltalk",children:e(x,{icon:"ask",children:i("contact")})}),e(x,{icon:"policy",onClick:le,children:i("terms")}),e(x,{icon:"policy",onClick:de,children:i("privacy_policy")}),Ee==="2023fall"&&e(x,{icon:"policy",onClick:pe,children:"한가위 송편 이벤트 참여 약관"}),e(x,{icon:"credit",onClick:ue,children:i("credit")}),p&&e(Pe,{children:e(x,{icon:"logout",children:i("logout")})})]})}),e(qe,{type:"only-logo"}),e(Fe,{isOpen:M,onChangeIsOpen:u}),e(Ae,{isOpen:m,onChangeIsOpen:y}),e(We,{isOpen:S,onChangeIsOpen:w}),e(De,{isOpen:$,onChangeIsOpen:_})]})};export{Et as default};
